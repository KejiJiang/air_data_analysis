import{d as x,_ as C,e as T,f as M,r as b,o as R,c as j,a as n,w as i,E as D,b as v,g as p}from"./index-8856bc68.js";import{r as L,u as Y,h as O}from"./moment-29e15091.js";var V={},A={get exports(){return V},set exports(u){V=u}};(function(u,s){(function(f,l){l()})(x,function(){function f(e,o){return typeof o>"u"?o={autoBom:!1}:typeof o!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function l(e,o,d){var t=new XMLHttpRequest;t.open("GET",e),t.responseType="blob",t.onload=function(){a(t.response,o,d)},t.onerror=function(){console.error("could not download file")},t.send()}function h(e){var o=new XMLHttpRequest;o.open("HEAD",e,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function _(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(o)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof x=="object"&&x.global===x?x:void 0,m=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(e,o,d){var t=r.URL||r.webkitURL,c=document.createElement("a");o=o||e.name||"download",c.download=o,c.rel="noopener",typeof e=="string"?(c.href=e,c.origin===location.origin?_(c):h(c.href)?l(e,o,d):_(c,c.target="_blank")):(c.href=t.createObjectURL(e),setTimeout(function(){t.revokeObjectURL(c.href)},4e4),setTimeout(function(){_(c)},0))}:"msSaveOrOpenBlob"in navigator?function(e,o,d){if(o=o||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(f(e,d),o);else if(h(e))l(e,o,d);else{var t=document.createElement("a");t.href=e,t.target="_blank",setTimeout(function(){_(t)})}}:function(e,o,d,t){if(t=t||open("","_blank"),t&&(t.document.title=t.document.body.innerText="downloading..."),typeof e=="string")return l(e,o,d);var c=e.type==="application/octet-stream",w=/constructor/i.test(r.HTMLElement)||r.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||c&&w||m)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var y=S.result;y=g?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),t?t.location.href=y:location=y,t=null},S.readAsDataURL(e)}else{var k=r.URL||r.webkitURL,E=k.createObjectURL(e);t?t.location=E:location.href=E,t=null,setTimeout(function(){k.revokeObjectURL(E)},4e4)}});r.saveAs=a.saveAs=a,u.exports=a})})(A);const U={setup(){const u=T(),s=M(!1),f=M(!1),l=M([]),h=a=>{if(a==null||a==="")return null;let e=O(a).format("YYYY-MM-DD");return e==="Invalid date"?e:O(a).add(1,"days").format("YYYY-MM-DD")};return{dialogVisible1:s,dialogVisible2:f,changeExcel:a=>{const e=a.target.files;if(e.length<=0)return!1;if(!/\.(xls|xlsx)$/.test(e[0].name.toLowerCase()))return!1;const o=new FileReader;o.onload=d=>{const t=L(d.target.result,{type:"binary",cellDates:!0}),c=t.SheetNames[0],w=Y.sheet_to_json(t.Sheets[c]);for(let g in w)w[g].time=h(w[g].time);l.value=w},o.readAsBinaryString(e[0])},tableData:l,toStepTwo:()=>{u.commit("updateInputData",l.value),s.value=!1,f.value=!0,l.value=[]},toStepThree:()=>{u.commit("updateTargetData",l.value),f.value=!1,l.value=[],D({message:"预测成功",type:"success"})}}}},B={id:"back_ground"},F=p("h1",{id:"title"},"SSYY微站数据校正系统",-1),N=p("p",{class:"SSYY"},"@ 2022-2023 SSYY团队",-1),P={class:"upload-container"},H=p("p",null," 上传文件 ",-1),q={class:"dialog-footer"},z={class:"upload-container"},G=p("p",null," 上传文件 ",-1),I={class:"dialog-footer"};function X(u,s,f,l,h,_){const r=b("el-col"),m=b("el-row"),a=b("el-button"),e=b("el-table-column"),o=b("el-table"),d=b("el-dialog");return R(),j("div",B,[n(m,null,{default:i(()=>[n(r,{span:24},{default:i(()=>[F]),_:1})]),_:1}),n(m,{id:"btn-group"},{default:i(()=>[n(r,{span:12,id:"f_download"},{default:i(()=>[n(a,{id:"download",size:"large"},{default:i(()=>[v("下载模板")]),_:1})]),_:1}),n(r,{span:12},{default:i(()=>[n(a,{type:"primary",id:"predict",size:"large",onClick:s[0]||(s[0]=t=>l.dialogVisible1=!0)},{default:i(()=>[v("开始预测")]),_:1})]),_:1})]),_:1}),n(m,{id:"footer_name"},{default:i(()=>[n(r,{span:24},{default:i(()=>[N]),_:1})]),_:1}),n(d,{modelValue:l.dialogVisible1,"onUpdate:modelValue":s[3]||(s[3]=t=>l.dialogVisible1=t),title:"导入微站数据",width:"52.5%","before-close":u.handleClose},{footer:i(()=>[p("span",q,[n(a,{onClick:s[2]||(s[2]=t=>l.dialogVisible1=!1)},{default:i(()=>[v("取消")]),_:1}),n(a,{type:"primary",onClick:l.toStepTwo},{default:i(()=>[v(" 下一步 ")]),_:1},8,["onClick"])])]),default:i(()=>[p("div",P,[H,p("input",{type:"file",accept:".xls,.xlsx",class:"upload-file",onChange:s[1]||(s[1]=t=>l.changeExcel(t))},null,32)]),n(o,{data:l.tableData.slice(0,5),border:"",style:{width:"100%"}},{default:i(()=>[n(e,{prop:"time",label:"时间",width:"70"}),n(e,{prop:"PM2_5",label:"PM₂.₅",width:"70"}),n(e,{prop:"PM10",label:"PM₁₀",width:"70"}),n(e,{prop:"NO2",label:"NO₂",width:"70"}),n(e,{prop:"CO",label:"CO",width:"70"}),n(e,{prop:"temp",label:"temp",width:"70"}),n(e,{prop:"humid",label:"humid",width:"70"}),n(e,{prop:"press",label:"press",width:"70"}),n(e,{prop:"speed",label:"speed",width:"70"}),n(e,{prop:"direct",label:"direct",width:"70"}),n(e,{prop:"SO2",label:"SO2",width:"70"}),n(e,{prop:"O3",label:"O3",width:"70"})]),_:1},8,["data"])]),_:1},8,["modelValue","before-close"]),n(d,{modelValue:l.dialogVisible2,"onUpdate:modelValue":s[6]||(s[6]=t=>l.dialogVisible2=t),title:"导入参照数据",width:"52.5%","before-close":u.handleClose},{footer:i(()=>[p("span",I,[n(a,{onClick:s[5]||(s[5]=t=>l.dialogVisible2=!1)},{default:i(()=>[v("取消")]),_:1}),n(a,{type:"primary",onClick:l.toStepThree},{default:i(()=>[v(" 开始预测 ")]),_:1},8,["onClick"])])]),default:i(()=>[p("div",z,[G,p("input",{type:"file",accept:".xls,.xlsx",class:"upload-file",onChange:s[4]||(s[4]=t=>l.changeExcel(t))},null,32)]),n(o,{data:l.tableData.slice(0,5),border:"",style:{width:"100%"}},{default:i(()=>[n(e,{prop:"PM2_5",label:"PM₂.₅",width:"260"}),n(e,{prop:"PM10",label:"PM₁₀",width:"260"}),n(e,{prop:"NO2",label:"NO₂",width:"260"})]),_:1},8,["data"])]),_:1},8,["modelValue","before-close"])])}const J=C(U,[["render",X]]);export{J as default};
